<p class="text-lg">Voici ce qui se brasse dans ma communaut√©...</p>

<div class="flex flex-row justify-between mt-4">
  <div>filtrer</div>

  <div>rechercher</div>
</div>

<br />


<div class="flex flex-row items-center gap-x-2">
  <button class="btn" (click)="expandAll()">Tout voir</button>
  <button class="btn" (click)="collapseAll()">Tout fermer</button>
</div>

@if (vm; as vm) {
  <cdk-accordion class="flex flex-col gap-y-8 mt-8" #accordion [multi]="true">
    @for (category of vm.categories; track category.name) {
      <cdk-accordion-item #accordionItem="cdkAccordionItem">
        <div class="cursor-pointer" (click)="accordionItem.toggle()">
          <span class="badge badge-lg badge-primary">
            {{ category.name }}
            <div class="badge badge-sm badge-ghost ml-2">{{ category.postCount }}</div>
          </span>
        
        </div>
        <div class="ml-8 mt-2" [style.display]="accordionItem.expanded ? '' : 'none'">
          <cdk-accordion class="flex flex-col gap-y-2" #accordion [multi]="true">
            @for (theme of category.themes; track theme.name) {
              <cdk-accordion-item #accordionItem="cdkAccordionItem">
                <div class="cursor-pointer" (click)="accordionItem.toggle()">
                  <span class="badge badge-lg badge-secondary">
                    {{ theme.name }}   
                    <div class="badge badge-sm badge-ghost ml-2">{{ theme.postCount }}</div>
                  </span>                  
                </div>
                <div class="ml-8 mt-2" [style.display]="accordionItem.expanded ? '' : 'none'">
                  @for (post of theme.posts; track post.id) {
                    <app-post-card [post]="post" [showStatistics]="true" [showTags]="false" [routerLink]="[post.id]"></app-post-card>
                  }
                </div>
              </cdk-accordion-item>
            }
          </cdk-accordion>
        </div>
      </cdk-accordion-item>
    } @empty {
      <div class="text-center">No data available</div>
    }
  </cdk-accordion>
} @else {
  loading...
}


<!-- <div class="flex flex-col overflow-y-auto gap-y-3">
  @if (vm; as vm) {
    @for (category of vm.categories; track category.name) {
      <div tabindex="0" class="collapse border border-base-300 bg-base-200">
        <div class="collapse-title text-xl font-medium">{{ category.name }}</div>
        <div class="collapse-content">
          @for (theme of category.themes; track theme.name) {
            <div tabindex="1" class="collapse border border-base-300 bg-base-200">
              <div class="collapse-title text-xl font-medium">{{ theme.name }}</div>
              <div class="collapse-content">
                @for (post of theme.posts; track post.id) {
                  <app-post-card [post]="post" [showStatistics]="true" [showTags]="true" [routerLink]="[post.id]"></app-post-card>
                }
              </div>
            </div>
          }
        </div>
      </div>
    } @empty {
      <div class="text-center">No data available</div>
    }
  } @else {
    <span class="loading loading-dots loading-lg"></span>
  }
</div> -->
